---
services:
  mysql:
    container_name: stage-mysql
    domainname: dev.local
    volumes:
      - ./.devcontainer//mysql-data:/var/lib/mysql
      - ./.devcontainer/docker-entrypoint-initdb.d:/docker-entrypoint-initdb.d:ro
    networks:
      - imathas

  certbot:
    container_name: stage-certbot
    domainname: dev.local
    restart: "no"
    volumes:
      - ./.devcontainer/letsencrypt:/etc/letsencrypt
      - ./.devcontainer/letsencrypt/logs:/var/log/letsencrypt
    networks:
      - imathas

  app:
    container_name: stage-app
    domainname: dev.local
    volumes:
      - ./IMathAS:/var/www/html
      - ./.devcontainer/letsencrypt:/etc/letsencrypt
      - ./.devcontainer/letsencrypt/logs:/var/log/letsencrypt
    networks:
      - imathas
